---
import { cn } from "@/lib/utils";

export interface Props {
    size?: "sm" | "base" | "lg" | "xl";
    variant?: "default" | "slate" | "gray" | "zinc" | "neutral" | "stone";
    class?: string;
}

const { size = "base", variant = "default", class: className } = Astro.props;

const sizeClasses = {
    sm: "prose-sm",
    base: "prose",
    lg: "prose-lg",
    xl: "prose-xl",
};

const variantClasses = {
    default: "",
    slate: "prose-slate",
    gray: "prose-gray",
    zinc: "prose-zinc",
    neutral: "prose-neutral",
    stone: "prose-stone",
};

const classes = cn(
    // Base prose styles
    sizeClasses[size],
    variantClasses[variant],

    // Text color
    "prose-p:text-foreground/85 prose-a:text-primary/95 prose-a:font-semibold",
    "prose-blockquote:text-primary/95",
    "prose-ul:text-primary/95 prose-ol:text-primary/95",
    "prose-table:text-primary/95",
    "prose-strong:text-primary/95 prose-em:text-primary/95",

    // Headings
    "prose-headings:text-primary/95 prose-headings:text-balance prose-headings:tracking-tight",
    "prose-h1:scroll-m-20 prose-h1:text-4xl prose-h1:font-extrabold",
    "prose-h2:scroll-m-20 prose-h2:border-b prose-h2:pb-2 prose-h2:text-3xl prose-h2:font-semibold prose-h2:tracking-tight prose-h2:first:mt-0",
    "prose-h3:scroll-m-20 prose-h3:text-2xl prose-h3:font-semibold prose-h3:tracking-tight",
    "prose-h4:scroll-m-20 prose-h4:text-xl prose-h4:font-semibold prose-h4:tracking-tight",

    // Paragraphs
    "prose-p:leading-7 prose-p:[&:not(:first-child)]:mt-6",

    // Blockquotes
    "prose-blockquote:mt-6 prose-blockquote:border-l-2 prose-blockquote:pl-6 prose-blockquote:italic",

    // Lists
    "prose-ul:my-6 prose-ul:ml-6 prose-ul:list-disc prose-ul:[&>li]:mt-2",
    "prose-ol:my-6 prose-ol:ml-6 prose-ol:list-decimal prose-ol:[&>li]:mt-2",

    // Tables
    "prose-table:my-6 prose-table:w-full prose-table:overflow-y-auto",
    "prose-thead:m-0 prose-thead:border-t prose-thead:p-0 prose-thead:even:bg-muted",
    "prose-th:border prose-th:px-4 prose-th:py-2 prose-th:text-left prose-th:font-bold prose-th:[&[align=center]]:text-center prose-th:[&[align=right]]:text-right",
    "prose-tbody:m-0 prose-tbody:border-t prose-tbody:p-0 prose-tbody:even:bg-muted",
    "prose-td:border prose-td:px-4 prose-td:py-2 prose-td:text-left prose-td:[&[align=center]]:text-center prose-td:[&[align=right]]:text-right",

    // Code styling
    // Inline code - remove default prose styling and add custom styling
    "prose-code:before:content-none prose-code:after:content-none",
    "prose-code:bg-muted prose-code:text-foreground prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded prose-code:text-sm prose-code:font-mono prose-code:font-medium",

    // Code blocks
    "prose-pre:bg-muted prose-pre:border prose-pre:rounded-lg prose-pre:p-4 prose-pre:overflow-x-auto",
    "prose-pre:text-foreground prose-pre:text-sm prose-pre:leading-relaxed",

    className,
);
---

<div class={classes}>
    <slot />
</div>
