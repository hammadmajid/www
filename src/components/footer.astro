---
import { TypographyLink } from "./typography";

// Fetch latest commit info at build time
const response = await fetch(
    "https://api.github.com/repos/hammadmajid/www/commits?per_page=1",
);
const commits = (await response.json()) as Array<any>;
const latestCommit = commits[0];

const commitSha = latestCommit.sha.substring(0, 7); // Short hash
const commitDate = new Date(latestCommit.commit.author.date)
    .toISOString()
    .replace("T", " ")
    .replace("Z", "")
    .substring(0, 19); // YYYY-MM-DD HH:MM:SS format
const commitUrl = latestCommit.html_url;
---

<footer
    class="text-center text-sm pb-12 py-4 text-muted-foreground flex justify-center items-center gap-2"
>
    built on <TypographyLink href={commitUrl} target="_blank"
        >{commitSha}</TypographyLink
    > at {commitDate}
</footer>
