---
import Card from "@/components/ui/card.astro"
import Button from "@/components/ui/button.astro"
import TechList from "./tech-list.astro"
import type { Tech } from "@/types/tech"
import { ExternalLink, EyeOff, Github } from "lucide-astro"

export interface Props {
  title: string
  description: string
  techStack: Tech[]
  livePreviewUrl?: string
  githubUrl?: string
  class?: string
}

const {
  title,
  description,
  techStack,
  livePreviewUrl,
  githubUrl,
  class: className = "",
} = Astro.props
---

<Card
  class={`h-full transition-all duration-300 hover:shadow-lg hover:shadow-primary/5 ${className}`}
>
  <h3 slot="title" class="text-xl font-bold leading-tight line-clamp-2">{title}</h3>
  <p slot="description" class="text-sm text-muted-foreground leading-relaxed">
    {description}
  </p>

  <div slot="content" class="flex flex-col h-full">
    <!-- Tech Stack Section -->
    <div class="space-y-2 flex-1">
      <h4 class="sr-only text-sm font-medium text-foreground">Technologies</h4>
      <TechList stack={techStack} />
    </div>

    <!-- Action Buttons - Always present to maintain consistent layout -->
    <div class="mt-auto pt-4 flex gap-2">
      <!-- Live Preview Button -->
      {livePreviewUrl ? (
        <Button size="sm" class="flex-1">
          <a
            href={livePreviewUrl}
            target="_blank"
            rel="noopener noreferrer"
            class="inline-flex items-center gap-2"
          >
            <ExternalLink class="w-4 h-4" />
            Live Preview
          </a>
        </Button>
      ) : (
        <Button
          size="sm"
          variant="outline"
          class="flex-1 inline-flex items-center gap-2 cursor-not-allowed opacity-50 bg-transparent"
          title="Live preview not available"
          disabled
        >
          <EyeOff class="w-4 h-4" />
          No Preview
        </Button>
      )}

      <!-- GitHub Button -->
      {githubUrl ? (
        <Button size="sm" variant="outline" class="flex-1 bg-transparent">
          <a
            href={githubUrl}
            target="_blank"
            rel="noopener noreferrer"
            class="inline-flex items-center gap-2"
          >
            <Github class="w-4 h-4" />
            GitHub
          </a>
        </Button>
      ) : (
        <Button
          size="sm"
          variant="outline"
          class="flex-1 inline-flex items-center gap-2 cursor-not-allowed opacity-50 bg-transparent"
          title="GitHub repository not available"
          disabled
        >
          <Github class="w-4 h-4" />
          Private
        </Button>
      )}
    </div>
  </div>
</Card>
