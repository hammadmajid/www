---
import {
  Nextdotjs,
  React,
  Tailwindcss,
  Mui,
  Terraform,
  Ansible,
  Zod,
  Typescript,
  Nodedotjs,
  Express,
  Trpc,
  Sanity,
  Prisma,
  Clerk,
  Drizzle,
  Supabase,
  Stripe,
  Vercel,
  Docker,
  Reactrouter,
  Shadcnui,
  Caddy,
  Mongodb,
  Postgresql,
  Resend,
} from 'simple-icons-astro';

export type Tech =
  | "Next.js"
  | "React"
  | "Tailwind"
  | "MUI"
  | "Terraform"
  | "Ansible"
  | "Zod"
  | "TypeScript"
  | "Node.js"
  | "Express"
  | "tRPC"
  | "Sanity"
  | "Prisma"
  | "Clerk"
  | "Drizzle"
  | "Supabase"
  | "Stripe"
  | "Vercel"
  | "Docker"
  | "React Router"
  | "shadcn/ui"
  | "Caddy"
  | "MongoDB"
  | "PostgreSQL"
  | "Resend";

export interface Props {
  stack: Tech[]
};

const { stack } = Astro.props;

const techIcons: Record<Tech, any> = {
  "Next.js": Nextdotjs,
  "React": React,
  "Tailwind": Tailwindcss,
  "MUI": Mui,
  "Terraform": Terraform,
  "Ansible": Ansible,
  "Zod": Zod,
  "TypeScript": Typescript,
  "Node.js": Nodedotjs,
  "Express": Express,
  "tRPC": Trpc,
  "Sanity": Sanity,
  "Prisma": Prisma,
  "Clerk": Clerk,
  "Drizzle": Drizzle,
  "Supabase": Supabase,
  "Stripe": Stripe,
  "Vercel": Vercel,
  "Docker": Docker,
  "React Router": Reactrouter,
  "shadcn/ui": Shadcnui,
  "Caddy": Caddy,
  "MongoDB": Mongodb,
  "PostgreSQL": Postgresql,
  "Resend": Resend,
};

const pillBaseStyles = "inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden";
const pillColorStyles = "text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground";
---

<div class="flex flex-wrap gap-2">
  {stack.map((tech: Tech) => {
    const IconComponent = techIcons[tech]
    return (
      <span class={`${pillBaseStyles} ${pillColorStyles}`}>
        {IconComponent && <IconComponent />}
        {tech}
      </span>
    )
  })}
</div>
